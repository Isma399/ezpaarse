#!/usr/bin/env node

/*jslint node: true, maxlen: 100, maxerr: 50, indent: 2 */
'use strict';
var byline = require('byline');

var stdin = process.stdin;
var stdout = process.stdout;
var stream = byline.createStream(stdin);

stream.on('data', function (line) {
  var result = {};
  var match;
  if (match = /([^\/]+)\/journal\/([^\/]+)\/([^\/]+)\/([^\/]+)\/([^\/]+)/.exec(line)) {
    if (match[5] == "toc.pdf") {
      result.type = 'TOC';
    } else {
      result.type = match[4].toUpperCase();
    }
  }
  stdout.write(JSON.stringify(result) + '\n');
});