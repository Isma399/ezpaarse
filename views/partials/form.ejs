  <div ng-controller="FormCtrl">
    <h2 class="ui header">
      Préparation du traitement
    </h2>
    <div class="ui segment">Indiquez ici les logs que vous désirez faire analyser par ezPAARSE. Vos logs nécessitent peut-être un paramétrage particulier pour qu'ezPAARSE les comprenne. Si nécessaire, <a ez-toggle-sidebar="#feedback-sidebar">contactez l'équipe ezPAARSE</a> pour une aide au paramétrage.</div>

    <div class="ui top attached tabular menu">
      <a class="right item" ng-click="selectTab('settings')" ng-class="{'settings': 'active'}[inputType]"><i class="settings icon"></i> Paramètres</a>
      <a class="item" ng-click="selectTab('files')" ng-class="{'files': 'active'}[inputType]"><i class="open folder icon"></i> Fichiers de logs</a>
      <a class="item" ng-click="selectTab('text')" ng-class="{'text': 'active'}[inputType]"><i class="text file icon"></i> Copier/coller de logs</a>
    </div>
    <div class="ui bottom attached active tab segment" ng-switch on="inputType">
      <div ng-switch-when="files">
        <input type="file" style="display: none;" id="input-file" onchange="angular.element(this).scope().selectFiles(this)" multiple>

        <div class="ui dimmable dropzone segment" ez-file-drop="addFiles">
          <div class="ui dimmer">
            <div class="content"><div class="center">
              <div class="ui tiny icon header">
                <i class="download icon"></i>
                Déposez les fichiers ici
              </div>
            </div></div>
          </div>

          <p><button class="ui small basic button" ez-trigger-click="#input-file">
            <i class="plus icon"></i>
            Cliquez pour ajouter
          </button></p>
          <!-- <p class="text">Ou déposez vos fichiers de logs ici</p> -->
          <table ng-if="files.length" class="ui small compact basic table">
            <thead><tr>
              <th class="twelve wide">Nom de fichier</th>
              <th class="four wide">Taille</th>
            </tr></thead>
            <tbody>
              <tr ng-repeat="file in files">
                <td><i class="tiny delete link icon" ng-click="removeFile($index)"></i> {{ file.name }}</td>
                <td>{{ file.size | bytesToSize }}</td>
              </tr>
            </tbody>
            <tfoot><tr>
              <th>{{ files.length }} fichiers sélectionnés</th>
              <th>{{ totalSize | bytesToSize }} au total</th>
            </tr></tfoot>
          </table>
        </div>

        <div class="ui center aligned basic segment">
          <div class="ui big buttons">
            <button ng-click="start()" class="ui teal button">Traiter les fichiers</button>
            <button ng-click="getCurl()" class="ui icon teal button" popup data-variation="inverted" data-position="right center" title="Traiter avec cURL"><i class="copy small icon"></i></button>
          </div>
        </div>
      </div>

      <div ng-switch-when="text">
        <div class="ui form field">
          <label for="log-lines">Copiez/collez vos lignes de log ici</label>
          <textarea id="log-lines" ng-model="$parent.directInput"></textarea>
        </div>

        <div class="ui center aligned basic segment">
          <div class="ui big buttons">
            <button ng-click="start()" class="ui teal button">Traiter les lignes</button>
            <button ng-click="getCurl()" class="ui icon teal button" popup data-variation="inverted" data-position="right center" title="Traiter avec cURL"><i class="copy small icon"></i></button>
          </div>
        </div>
      </div>

      <div ng-switch-when="settings">
        <% include form-settings %>
      </div>
    </div>

    <modal class="ui modal" ez-get-curl>
      <div class="ui form content">
        <p class="justify aligned">Copiez la commande ci-dessous pour exécuter la requête avec cURL en utilisant le paramétrage actuel du formulaire. Vous devrez peut-être modifier le chemin des fichiers ou ajouter des options telles que <code>--proxy</code> ou <code>--no-buffer</code>.</p>

        <div class="field">
          <textarea class="ui input" ng-model="curl"></textarea>
        </div>
      </div>
    </modal>
  </div>
